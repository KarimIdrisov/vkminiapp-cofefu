(this["webpackJsonpmini-app"]=this["webpackJsonpmini-app"]||[]).push([[0],{127:function(e,t,c){},129:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(20),r=c.n(a),s=c(11),i=c.n(s),l=c(12),j=c(5),o=(c(126),c(127),c(3)),d=function(e){var t=e.id,c=e.go;return Object(o.jsxs)(j.p,{id:t,children:[Object(o.jsx)(j.q,{children:"Spy"}),Object(o.jsxs)(j.j,{children:[Object(o.jsx)(j.g,{children:Object(o.jsx)(j.c,{stretched:!0,size:"l",mode:"secondary",onClick:c,"data-to":"locations",children:"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043b\u043e\u043a\u0430\u0446\u0438\u0438"})}),Object(o.jsx)(j.g,{children:Object(o.jsx)(j.c,{stretched:!0,size:"l",mode:"secondary",onClick:c,"data-to":"game",children:"\u041d\u0430\u0447\u0430\u0442\u044c \u0438\u0433\u0440\u0443"})})]})]})},b={university:"\u0423\u043d\u0438\u0432\u0435\u0440\u0441\u0438\u0442\u0435\u0442",hospital:"\u0411\u043e\u043b\u044c\u043d\u0438\u0446\u0430",embassy:"\u041f\u043e\u0441\u043e\u043b\u044c\u0441\u0442\u0432\u043e",movieStudio:"\u041a\u0438\u043d\u043e\u0441\u0442\u0443\u0434\u0438\u044f",partisanDetachment:"\u041f\u0430\u0440\u0442\u0438\u0437\u0430\u043d\u0441\u043a\u0438\u0438\u0306 \u043e\u0442\u0440\u044f\u0434",vegetableMarket:"\u041e\u0432\u043e\u0449\u0435\u0431\u0430\u0437\u0430",pirateShip:"\u041f\u0438\u0440\u0430\u0442\u0441\u043a\u0438\u0438\u0306 \u043a\u043e\u0440\u0430\u0431\u043b\u044c",polarStation:"\u041f\u043e\u043b\u044f\u0440\u043d\u0430\u044f \u0441\u0442\u0430\u043d\u0446\u0438\u044f",supermarket:"\u0421\u0443\u043f\u0435\u0440\u043c\u0430\u0440\u043a\u0435\u0442",theatre:"\u0422\u0435\u0430\u0442\u0440",passengerTrain:"\u041f\u0430\u0441\u0441\u0430\u0436\u0438\u0440\u0441\u043a\u0438\u0438\u0306 \u043f\u043e\u0435\u0437\u0434"},O=function(e){var t=e.id,c=e.go;return Object(o.jsxs)(j.p,{id:t,children:[Object(o.jsx)(j.q,{left:Object(o.jsx)(j.r,{onClick:c,"data-to":"home"}),children:"\u041b\u043e\u043a\u0430\u0446\u0438\u0438"}),Object(o.jsx)(j.j,{children:Object(o.jsx)(j.m,{children:b&&Object.keys(b).map((function(e){return Object(o.jsx)(j.e,{expandable:!0,children:b[e]},e)}))})})]})},h=c(22),u=function(e){var t=e.id,c=e.go,a=e.openLocationModal,r=e.startTimer,s=e.timer,i=e.stopTimer,d=Object(n.useState)(3),O=Object(l.a)(d,2),u=O[0],x=O[1],m=Object(n.useState)(1),p=Object(l.a)(m,2),f=p[0],g=p[1],v=Object(n.useState)({gameStart:!1,dealStart:!1}),S=Object(l.a)(v,2),y=S[0],k=S[1],C=Object(n.useState)(1),M=Object(l.a)(C,2),T=M[0],z=M[1],I=Object(n.useState)(""),A=Object(l.a)(I,2),K=A[0],V=A[1],W=Object(n.useState)([]),w=Object(l.a)(W,2),D=w[0],L=w[1];function F(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e))+e}return Object(o.jsxs)(j.p,{id:t,children:[Object(o.jsx)(j.q,{left:Object(o.jsx)(j.r,{onClick:c,"data-to":"home"}),children:"\u0418\u0433\u0440\u0430"}),!y.dealStart&&!y.gameStart&&Object(o.jsxs)(j.j,{children:[Object(o.jsx)(j.k,{children:"\u041f\u043e\u0434\u0433\u043e\u0442\u043e\u0432\u043a\u0430"}),Object(o.jsxs)(j.i,{children:[Object(o.jsx)(j.h,{top:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0438\u0433\u0440\u043e\u043a\u043e\u0432",status:u>=3&&u<=12?"valid":"error",children:Object(o.jsx)(j.l,{type:"number",name:"countOfPlayers",value:u,onChange:function(e){x(e.currentTarget.value)}})}),Object(o.jsx)(j.h,{top:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0448\u043f\u0438\u043e\u043d\u043e\u0432",status:12==u?2==f?"valid":"error":f>=1&&f<=2?"valid":"error",children:Object(o.jsx)(j.l,{type:"number",name:"countOfSpyes",value:f,onChange:function(e){g(e.currentTarget.value)}})}),Object(o.jsx)(j.h,{children:Object(o.jsx)(j.c,{size:"l",stretched:!0,onClick:function(){k(Object(h.a)(Object(h.a)({},y),{},{dealStart:!0}));for(var e=1;e<=f;e+=1)L(D.concat([F(0,u)]));V(b[Object.keys(b)[F(1,Object.keys(b).length)]])},children:"\u041d\u0430\u0447\u0430\u0442\u044c \u0440\u0430\u0437\u0434\u0430\u0447\u0443"})})]})]}),y.dealStart&&Object(o.jsxs)(j.g,{style:{textAlign:"center"},children:[Object(o.jsxs)(j.s,{style:{display:"block",marginBottom:10},children:["\u0418\u0433\u0440\u043e\u043a ",T,", \u043e\u0437\u043d\u0430\u043a\u043e\u043c\u0442\u0435\u0441\u044c \u0441 \u043b\u043e\u043a\u0430\u0446\u0438\u0435\u0439."]}),Object(o.jsxs)(j.d,{stretched:!0,mode:"vertical",children:[Object(o.jsx)(j.c,{stretched:!0,mode:"secondary",size:"m",onClick:function(){return a(D.includes(T)?"\u0412\u044b \u0448\u043f\u0438\u043e\u043d":K)},children:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043b\u043e\u043a\u0430\u0446\u0438\u044e"}),T<u&&Object(o.jsx)(j.c,{stretched:!0,mode:"secondary",size:"m",onClick:function(){z(T+1)},children:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439 \u0438\u0433\u0440\u043e\u043a"}),T==u&&Object(o.jsx)(j.c,{stretched:!0,mode:"secondary",size:"m",onClick:function(){r(u),k({gameStart:!0,dealStart:!1})},children:"\u041d\u0430\u0447\u0430\u0442\u044c \u0438\u0433\u0440\u0443"})]})]}),y.gameStart&&Object(o.jsxs)(j.g,{style:{display:"flex",alignItems:"center",flexDirection:"column"},children:[Object(o.jsx)(j.s,{children:"\u0418\u0433\u0440\u0430 \u043d\u0430\u0447\u0430\u043b\u0430\u0441\u044c!"}),Object(o.jsx)(j.s,{style:{fontSize:"20px",margin:"10px"},children:s}),Object(o.jsx)(j.c,{stretched:!0,mode:"secondary",size:"m",onClick:function(){z(1),L([]),V(""),i(),k({gameStart:!1,dealStart:!1})},children:"\u0417\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c \u0438\u0433\u0440\u0443"})]})]})},x=function(){var e=Object(n.useState)("bright_light"),t=Object(l.a)(e,2),c=t[0],a=t[1],r=Object(n.useState)("home"),s=Object(l.a)(r,2),b=s[0],h=s[1],x=Object(n.useState)(""),m=Object(l.a)(x,2),p=m[0],f=m[1],g=Object(n.useState)(""),v=Object(l.a)(g,2),S=v[0],y=v[1],k=Object(n.useState)(""),C=Object(l.a)(k,2),M=C[0],T=C[1],z=Object(n.useState)(""),I=Object(l.a)(z,2),A=I[0],K=I[1],V=Object(n.useState)(!1),W=Object(l.a)(V,2),w=W[0],D=W[1];function L(e){var t=e-new Date;t<=0&&clearInterval(A),w&&t<15e3&&(i.a.send("VKWebAppFlashSetLevel",{level:1}),setTimeout((function(){i.a.send("VKWebAppFlashSetLevel",{level:0})}),500));var c=t>0?Math.floor(t/1e3/60)%60:0,n=t>0?Math.floor(t/1e3)%60:0;T("".concat(c,":").concat(n<10?"0".concat(n):n))}Object(n.useEffect)((function(){i.a.subscribe((function(e){var t=e.detail,c=t.type,n=t.data;"VKWebAppUpdateConfig"===c&&a(n.scheme),"VKWebAppFlashGetInfoResult"===c&&(D(n.is_available),n.is_available&&i.a.send("VKWebAppFlashSetLevel",{level:0}))}))}),[]);var F=function(e){h(e.currentTarget.dataset.to)},q=Object(o.jsx)(j.o,{activeModal:p,children:Object(o.jsx)(j.n,{style:{height:"200px",display:"flex",justifyContent:"center",alignItems:"center",fontSize:"18px"},onClose:function(){return f("")},id:"location",children:S})});return Object(o.jsx)(j.f,{scheme:c,children:Object(o.jsx)(j.a,{children:Object(o.jsx)(j.b,{children:Object(o.jsx)(j.u,{modal:q,children:Object(o.jsx)(j.t,{children:Object(o.jsxs)(j.v,{activePanel:b,children:[Object(o.jsx)(O,{id:"locations",go:F}),Object(o.jsx)(d,{id:"home",go:F}),Object(o.jsx)(u,{id:"game",go:F,openLocationModal:function(e){f("location"),y(e)},timer:M,startTimer:function(e){var t,c,n=(t=new Date,c=e,new Date(t.getTime()+6e4*c));L(n),K(setInterval((function(){return L(n)}),1e3))},stopTimer:function(){T(""),clearInterval(A)}})]})})})})})})};i.a.send("VKWebAppInit"),r.a.render(Object(o.jsx)(x,{}),document.getElementById("root"))}},[[129,1,2]]]);
//# sourceMappingURL=main.358dc0c3.chunk.js.map